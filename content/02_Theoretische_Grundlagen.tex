% vim: set tw=160:

\chapter{Grundlagen und Definitionen}
\label{chap:GrundlagenDefinitionen}

Zum Verständnis der folgenden Kapitel wird ein grundlegendes Verständnis von \gls{xml}, \gls{xhtml} und asymmetrischer Kryptographie vorausgesetzt.
Themenbereiche wie digitale Signaturen und für diese Arbeit relevanten Techniken die vor allem in Verbindung mit \glspl{website} vorkommen werden hier kurz
dargestellt. Dazu gehören vor allem \gls{openpgp}, \gls{x509} und \gls{xml-dsig}.

\section{Website}
\index{Website}
\label{sec:GrundlagenDefinitionen:Website}
Eine Webseite repräsentiert eine Menge von Dateien, die unter dem gemeinsamen Namensraum einer, oder auch mehrerer Domains mit dem selben Bezug, abrufbar sind.
Zu diesen Dateien gehören vorrangig \gls{html}- und \gls{xhtml}-Dokumente, \gls{css}-Vorlagen und \gls{javascript}-Skripte, sowie auch komplementäre Bild-, Ton- und
Videodateien.

\section{Webseite}
\index{Webseite}
\label{sec:GrundlagenDefinitionen:Webseiten}
Der Begriff einer \gls{webseite} bezeichnet ein einzelnes \gls{html}- oder \gls{xhtml}-Dokument inklusive aller von ihm zur Darstellung referenzierten
Inhalte wie \gls{css}-Vorlagen und \gls{javascript}-Skripte, sowie auch komplementäre Bild-, Ton- und Videodateien. Inhalte auf die mittels \gls{html}-Links, wie sie
von \xmlelem{a}-Elementen erzeugt werden, verwiesen wird, gehören nicht zum Umfang einer Webseite, da sie nicht direkt in die Darstellung in einem
\gls{webbrowser} einfließen.

\section{Bereiche in XHTML-Dokumenten}
\index{Bereiche in XHTML-Dokumenten}
\label{sec:GrundlagenDefinitionen:BereicheXHTML}
Der Dokumententyp \gls{xhtml} ist eine Anwendungsform von \gls{xml} auf das \gls{sgml}-Format \gls{html}\cite{xhtml:w3c} und kann dadurch in seiner Form als
\gls{dom}-Baum betrachtet werden \cite{xhtml:oreilly}. Da moderne \Gls{webbrowser} unterschiedliche Technologien wie \gls{css} und \gls{javascript} zur
ergänzenden Darstellung von \gls{xhtml} nutzen, ist nicht sichergestellt, dass ein Zweig in einem \gls{xhtml}-Dokument einen geschlossenen Bereich in der
grafischen Darstellung des selben Dokumentes einnimmt. Umgekehrt können unterschiedliche Zweige aus dem \gls{dom}-Baum bei der Darstellung zu einem
geschlossenen Bereich zusammengeführt werden.

Als ein Bereich wird im Rahmen dieser Arbeit die Positionierung eines oder mehrerer Elemente innerhalb eines \gls{dom}-Baumes definiert, nicht die grafische
Darstellung in einem \gls{webbrowser}.

\section{Digitale Signaturen}
\index{Digitale Signaturen}
\label{sec:GrundlagenDefinitionen:DigitaleSignaturen}
Unter dem kryptographischen Sammelbegriff der digitalen Signatur versteht man eine zuverlässige und nicht fälschbare Kontrollinformation die über den Urheber
und mögliche Modifikationen des zu schützenden Inhalts Auskunft gibt \cite{kits}. Dabei kann eine digitale Signatur analog zu der Unterschrift einer Person
betrachtet werden \cite{esig:bsi}, jedoch mit erweiterten Eigenschaften.

Der Begriff der digitalen Signatur wird als eine Information definiert, welche die Identität einer Urheber-Entität mit einer digitalen Information (Nachricht)
assoziiert und die drei kryptografischen Sicherheitsdienste Integrität, Authentizität und Verbindlichkeit erfüllt \cite{hac}.

\index{Digitale Signaturen!Integrität}
\label{sec:GrundlagenDefinitionen:DigitaleSignaturen:Integrität}
Durch \textbf{Integrität} wird garantiert, dass eine Nachricht nicht verändert wurde \cite{niag}. Der Empfänger der Nachricht ist damit in der Lage eine Aussage über
mögliche Änderungen am Inhalt zu treffen.

\index{Digitale Signaturen!Authentizität}
\label{sec:GrundlagenDefinitionen:DigitaleSignaturen:Authentizität}
Der Empfänger einer Nachricht kann durch die \textbf{Authentizität} deren Urheber feststellen. Der Urheber der Nachricht weist dabei seine Identität seinem
Partner gegenüber durch ein Geheimnis oder eine Fertigkeit aus, die ihn für den Empfänger eindeutig kennzeichnet. Die Authentizität einer Nachricht setzt ihre
Integrität voraus, denn eine veränderte Nachricht ist auch nicht mehr authentisch \cite{kits}.

\index{Digitale Signaturen!Verbindlichkeit}
\label{sec:GrundlagenDefinitionen:DigitaleSignaturen:Verbindlichkeit}
Als \textbf{Verbindlichkeit} einer Nachricht wird die Nachweisbarkeit des Urhebers einer Nachricht gegenüber Dritten definiert. Dieser Sicherheitsdienst schließt die
Eigenschaften der Authentizität und der Integrität mit ein \cite{kits}.

\section{Digitale Signaturverfahren}
\index{Digitale Signaturverfahren}
\label{sec:GrundlagenDefinitionen:DigitaleSignaturen:Verfahren}
Ein digitales Signaturverfahren stellt ein Verfahren dar, mit welchem eine Entität ihre Identität an eine Information binden kann. Der Vorgang des Signierens
wird durch das Transformieren der Information und eines Geheimnisses, das nur dem Urheber gekannt ist, in eine Signatur definiert \cite{hac}.

Ein Signaturverfahren bildet dabei für eine, zu signierende Nachricht, den passenden Hash-Wert und erzeugt mit dem privaten Schlüssel die Signaturinformation.
Diese Information wird nun in das, dem Verfahren entsprechende, Format transformiert und der Nachricht beigefügt.
Der Empfänger extrahiert die Signaturinformation aus der empfangenen Nachricht, bildet den Hash-Wert über die signierte Nachricht und vergleicht diesen mit dem
Hash-Wert aus der Signatur. Sind beide miteinander identisch, ist die Signatur gültig und die Integrität der Nachricht gewährleistet \cite{hac,singh:messages}.

Asymmetrische kryptographische Verfahren lassen sich zum Verschlüsseln wie auch zum Signieren von Informationen verwenden. Im Rahmen dieser Arbeit wird nur auf
den Signatur-Betrieb eingegangen.

\subsection{OpenPGP}
\index{OpenPGP}
\label{sec:GrundlagenDefinitionen:DigitaleSignaturen:Verfahren:openpgp}
\gls{openpgp} wurde im Jahr 1991 von Philip Zimmermann \cite{zimmermann:pgp} entwickelt, mit dem Ziel die digitale Kommunikation vor dem Zugriff durch Dritte zu
schützen. Eine der Motivationen während der Entwicklung waren die wiederholten Abhöraktionen der Bürgerrechtsbewegungen in den Vereinigten Staaten von Amerika
durch die dortigen Geheimdienste \cite{singh:messages}.

Der Name der aktuelle Spezifikation für das Datenformat ist \gls{openpgp} und ist im RFC4880 \cite{openpgp:ietf} festgelegt. Dabei werden zwei Betriebsarten,
Signieren und Verschlüsseln festgelegt.


\subsection{X.509}
\index{\gls{x509}}
\label{sec:GrundlagenDefinitionen:DigitaleSignaturen:Verfahren:x509}
Der \gls{itu} Standard \gls{x509} wurde 1988 veröffentlicht und beschreibt die Grundlage für Zertifikate und Widerrufslisten in der Syntax von \gls{asn1}.
Jedes \gls{x509}-Zertifikat beinhaltet Informationen über den Inhaber, dessen Rechte, den öffentlichen Schlüssel und eine Gültigkeitsdauer. Diese Informationen
sind von dem übergeordneten Zertifikat, auch \gls{ca} genannt, digital signiert.

\gls{x509} kommt zum Beispiel in Protokollen wie \gls{ssl}/\gls{tls}, \gls{ipsec} oder \gls{eap} zum Einsatz, da bei diesen eine streng hierarchische Struktur
der Vertrauensbeziehungen von Vorteil ist \cite{kits}.

\section{Vertrauensbeziehungen}
Der Nutzen von digitalen Signaturen kommt erst zum Tragen, wenn auch sichergestellt wird, dass es eine Möglichkeit gibt, festzustellen, mit welcher Sicherheit
ein Schlüssel einer bestimmten Entität zugeordnet werden kann. Ist diese Sicherheit nicht gegeben, können keine Aussagen zur Authentizität einer Signatur
getätigt werden. Es müssen also Methoden existieren, um das eigene Vertrauen in einen Schlüssel auszudrücken.

\gls{openpgp} und \gls{x509} verfolgen hierbei jeweils unterschiedliche Ansätze um Vertrauensbeziehungen zu Schlüsseln zu regeln.

\subsection{Web Of Trust}
Um die Ermittlung der Authentizität einer Signatur zu erleichtern, stellt \gls{openpgp} eine Funktionalität zur Beglaubigung von Schlüsseln zur Verfügung. Dabei
werden die Schlüssel von anderen \gls{openpgp}-Benutzern signiert. Das ermöglicht es, Rückschlüsse auf die Vertrauenswürdigkeit von Schlüsseln zu ziehen, ohne
von einer zentralen hierarchischen Struktur abhängig zu sein. Die Signatur auf einen Schlüssel wird üblicherweise nur nach der Überprüfung der Identität des
Schlüsselinhabers gewährt. Dies kann zum Beispiel durch ein Telefonat oder ein persönliches Treffen erfolgen, bei dem die Prüfsumme des Schlüssels verglichen
wird.  

Wenn Alice den Schlüssel von Bob signiert, dann ermöglicht dies einer Person, die bereits dem Schlüssel von Alice vertraut, auch dem Schlüssel von Bob zu
vertrauen. Durch diese Delegation von Vertrauen bildet sich eine flache, vernetzte Struktur wie in \fref{fig:wot} dargestellt, die unter dem Namen \gls{wot}
bekannt ist. 

Jeder Benutzer von \gls{openpgp} ist somit in der Lage, sein Vertrauen in Schlüssel nach seinem eigenen Ermessen zu vergeben. Dafür stehen dem
Benutzer unterschiedliche Stufen des Vertrauens zur Verfügung die er mit seiner Signatur eines fremden Schlüssels verknüpfen kann. Sie reichen von "`Ich bin mir
nicht sicher"' bis zu "`Ich vertraue absolut"'.

\begin{figure}
\centering
\input{./figures/web-of-trust}
\caption{Schematische Darstellung des Web Of Trust}
\label{fig:wot}
\end{figure}

\subsection{Public Key Infrastruktur}
\gls{x509} bildet die Grundlage für ein hierarchisches System aus Zertifikaten, auch \gls{pki} genannt. Im Gegensatz zum \gls{wot}, welches einen Graphen der
beteiligten Schlüssel bildet, bestehen bei einer \gls{pki} eine oder mehrere baumartige Vertrauensstrukturen.
An der Spitze eines solchen Baumes steht eine Root-\gls{ca}, welche die Zertifikate der nächsten, im Baum tiefer gelegen Ebene signiert. Jeder Pfad, der von der
Wurzel, der Root-\gls{ca} des Baumes, zu einem der Zertifikate an einem Ast führt wird als \gls{cot} bezeichnet. \fref{fig:cot} stellt einen solchen Baum mit
mehreren \glspl{cot} dar.

Die Anzahl der Ebenen in einem \gls{pki}-Baum unterliegt keiner Beschränkung, jedoch muss einem Zertifikat explizit das Recht eingeräumt werden, andere
Zertifikate unter ihr zu signieren \cite{kits}. Im Internet existiert heute eine große Anzahl von \glspl{ca}, welche von Staaten, Unternehmen oder auch
Non-Profit-Organisationen betrieben werden. Zwischen diesen einzelnen Bäumen besteht keine Verbindung und auch keine Vertrauensbeziehung. Deshalb vertraut bei
einer \gls{pki} jeder Teilnehmer einer von ihm (oder seinem Softwaredistributor) ausgewählten Menge an \glspl{ca}. \cite{ssliverse:eff}

\begin{figure}
\centering
\input{./figures/chain-of-trust}
\caption{Schematische Darstellung einer \texorpdfstring{\protect\Glsentryname{pki}}{PKI}}
\label{fig:cot}
\end{figure}

\section{XML-DSig}
\index{\gls{xml-dsig}}
\label{sec:GrundlagenDefinitionen:xml-dsig}
Von der \gls{ietf} und dem \gls{w3c} entwickelt, hat die \gls{xml-dsig} Spezifikation zum Ziel, die kryptografischen Sicherheitsfunktionen Integrität,
Authentizität und Verbindlichkeit für beliebige Daten, die entweder direkt im \gls{xml}-Format vorliegen oder über \glspl{uri} ansprechbar sind, anwendbar zu
machen \cite{xml-dsig:w3c}. In \fref{chap:XML-DSig} wird näher auf die Arbeitsweise von \gls{xml-dsig} eingegangen.

